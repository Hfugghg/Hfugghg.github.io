<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>2306覃睿的项目</title>
	<link rel="icon" type="image/png" sizes="192x192" href="img/logo.png">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<style>
		body {
			background-image: url(img/background.jpeg);
			background-repeat: no-repeat;
			background-position: center center;
			background-size: auto auto;
			display: flex;
			flex-direction: column;
			min-height: 100vh;
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		main {
			flex: 1;
		}
		
		dt{
			font-size: 20px;
			color: gray;
		}
		
		/* 模态框样式 */
		.modal {
		  display: none; /* 默认隐藏模态框 */
		  position: fixed; /* 模态框固定在视口上 */
		  z-index: 1; /* 设置模态框在最高层级 */
		  left: 0;
		  top: 0;
		  width: 100%; /* 全屏宽度 */
		  height: 100%; /* 全屏高度 */
		  overflow: auto; /* 允许滚动 */
		  background-color: rgba(0, 0, 0, 0.4); /* 黑色背景，半透明 */
		}
		
		/* 模态框内容样式 */
		.modal-content {
		  background-color: #fefefe;
		  margin: 15% auto; /* 15% 从顶部开始，水平居中 */
		  padding: 20px;
		  border: 1px solid #888;
		  width: 80%; /* 宽度可以根据需要调整 */
		  max-width: 600px; /* 限制最大宽度 */
		}
		
		/* 关闭按钮样式 */
		.close {
		  color: #aaa;
		  float: right;
		  font-size: 28px;
		  font-weight: bold;
		  cursor: pointer;
		}
		
		.close:hover,
		.close:focus {
		  color: black;
		  text-decoration: none;
		  cursor: pointer;
		}
		
		/* 二维码图片样式 */
		.qrcode-image {
		  display: block;
		  margin: 0 auto; /* 水平居中 */
		  max-width: 100%; /* 响应式图片 */
		  height: auto;
		}

		#games {
			text-align: center;
			margin: 0 auto;
		}

		.game-container {
			margin: 50px 20px;
			position: relative;
			height: 200px;
			overflow: hidden;
			background-color: rgba(255, 255, 255, 0.6);
		}

		.block {
			position: absolute;
			width: 100px;
			height: 200px;
			background-color: black;
			bottom: 0;
			transition: all 0.5s ease;
		}

		#gy {
			text-align: center;
		}

		.mod_help {
			display: flex;
			justify-content: space-around;
			padding: 20px;
			background-color: rgba(255, 255, 255, 0.7);
			margin-top: 100px;
		}

		.mod_help_item dt {
			font-weight: bold;
		}

		.mod_help_item dd a {
			text-decoration: none;
			color: #333;
			display: block;
			margin-bottom: 5px;
		}

		@media (max-width: 767.98px) {
			.navbar-brand {
				color: #fff;
			}

			.navbar-nav .nav-link {
				color: #fff;
			}


		}
	</style>
	<script src="js/jquery-3.5.1.slim.min.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script>

</head>

<body>
	<main>
		<!-- 导航栏 -->
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<a class="navbar-brand" href="#"><img style="height: 50px; width: 50px;" src="img/logo.png" alt="" /></a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
				aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav">
					<li class="nav-item active">
						<a class="nav-link" href="index.html">首页 <span class="sr-only">(current)</span></a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#gy">关于</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="service.html">服务</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#" id="card">联系我们</a>
					</li>
				</ul>
			</div>
		</nav>

		<!-- 页面内容 -->
		<div id="myModal" class="modal">
		  <div class="modal-content">
		    <span class="close">&times;</span>
		    <img src="img/My.png" alt="二维码名片" class="qrcode-image">
		    <!-- 可以添加一些额外的文本或信息 -->
		  </div>
		</div>
		<div id="games">
			<div class="h1">
				您的得分<span id="score">
					0
				</span>
			</div>
			<div class="game-container">
				<!-- 这里将动态添加块 -->
			</div>
			<div id="Mybtn">
				<button id="start-game" class="btn btn-primary">开始游戏</button>
			</div>
		</div>


	</main>

	<div class="mod_help" id="gy">
		<dl class="mod_help_item">
			<dt>爱坤指南</dt>
			<dd><a href="#">爱坤流程</a></dd>
			<dd><a href="#">爱坤介绍</a></dd>
			<dd><a href="#">生活</a></dd>
			<dd><a href="#">常见问题</a></dd>
		</dl>
		<dl class="mod_help_item">
			<dt>爱坤服务</dt>
			<dd><a href="#">爱坤政策</a></dd>
			<dd><a href="#">爱坤社区</a></dd>
			<dd><a href="#">爱坤制度</a></dd>
			<dd><a href="#">客服</a></dd>
		</dl>
		<dl class="mod_help_item">
			<dt>爱坤方式</dt>
			<dd><a href="#">唱</a></dd>
			<dd><a href="#">跳</a></dd>
			<dd><a href="#">rap</a></dd>
			<dd><a href="#">篮球</a></dd>
		</dl>
		<dl class="mod_help_item">
			<dt>关于爱坤</dt>
			<dd><a href="#">坤坤介绍</a></dd>
			<dd><a href="#">爱坤发展历程</a></dd>
			<dd><a href="#">加入爱坤</a></dd>
			<dd><a href="#">爱坤伙伴</a></dd>
		</dl>
		<dl class="mod_help_item">
			<dt>关注我们</dt>
			<dd><a href="#">爱坤公众号</a></dd>
			<dd><a href="#">爱坤微博</a></dd>
			<dd><a href="#">抖音账号</a></dd>
			<dd><a href="#">爱坤下载</a></dd>
		</dl>
	</div>

	<script>
		$(document).ready(function () {
			let isGameRunning = false;
			let blockSpeed = 5; // 块的移动速度，单位：像素/秒
			let maxSpeed; // 块的最大移动速度
			let blockIntervals = []; // 存储每个块的定时器的数组
			let score = 0;

			function addBlock() {
				if (isGameRunning) {
					let leftPos = Math.random() * ($('.game-container').width() - 100); // 随机位置
					let block = $('<div class="block" style="left: ' + leftPos + 'px;"></div>');
					$('.game-container').append(block);

					// 模拟块的移动
					let intervalId = setInterval(function () {
						let currentLeft = parseInt(block.css('left'));
						block.css('left', currentLeft + blockSpeed + 'px');

						// 如果块移出视口，移除它
						if (currentLeft + 100 < 0) {
							clearInterval(intervalId);
							block.remove();
						}

						if (blockSpeed < maxSpeed) {
							blockSpeed += 0.1; // 每秒增加一点速度（假设每秒60帧）
						}
					}, 1000 / 60); // 假设每秒60帧
				} else {
					console.log("停止")
				}
				blockIntervals.push(intervalId);

			}

			$('#start-game').click(function () {
				maxSpeed = prompt("速度（整数）：", "20");
				if (!isGameRunning) {
					isGameRunning = true;
					setInterval(addBlock, 1000); // 每秒添加一个块
					// 可以在这里添加其他启动游戏的逻辑
				}
			});

			// 添加点击事件
			$('.game-container').click(function (e) {
				if (isGameRunning) {
					// 转换点击位置为相对于游戏容器的位置
					let clickX = e.pageX - $(this).offset().left;
					let clickY = e.pageY - $(this).offset().top;

					// 遍历所有块
					$('.block').each(function () {
						let block = $(this);
						let blockLeft = parseInt(block.css('left'));
						let blockTop = parseInt(block.css('top'));
						let blockWidth = block.width();
						let blockHeight = block.height();

						// 检查点击位置是否在块内
						if (clickX >= blockLeft && clickX <= blockLeft + blockWidth &&
							clickY >= blockTop && clickY <= blockTop + blockHeight) {
							// 点击在块上，移除块
							block.remove();
							// 可以在这里添加得分或其他逻辑
							score++; // 增加得分
							$('#score').text(score); // 更新div中的得分
							return false; // 跳出循环，不需要继续检查其他块
						} else {
							isGameRunning = false;
							clearInterval(setInterval(addBlock, 1000));

							// 清除所有块的定时器
							blockIntervals.forEach(function (intervalId) {
								clearInterval(intervalId);
							});
							$('.block').remove();
							console.log(isGameRunning)
							alert('你输了！');
							$("#start-game").remove();
							$(".rest").remove();
							$('#Mybtn').append('<a class="btn btn-primary rest" href="Pianoblock.html">请点击这个按钮继续游戏</a>');
						}
					});
				}
			});
		});
		
		let modal = document.getElementById("myModal");
		let btn = document.getElementById("card");
		let span = document.getElementsByClassName("close")[0];
		
		// 显示模态框
		btn.onclick = function() {
		  modal.style.display = "block";
		}
		
		// 隐藏模态框
		span.onclick = function() {
		  modal.style.display = "none";
		}
		
		// 当用户点击模态框外部时关闭它
		window.onclick = function(event) {
		  if (event.target == modal) {
		    modal.style.display = "none";
		  }
		}
	</script>

</body>

</html>